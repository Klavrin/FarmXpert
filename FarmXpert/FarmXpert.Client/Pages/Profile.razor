@page "/profile"
@using MudBlazor

<MudPaper Class="profile-page" Square Elevation="0" Style="background:transparent;">
  <!-- Banner Section -->
  <MudCard Class="banner-section" Elevation="0">
    <MudCardContent Class="banner-content">
      <MudText Typo="Typo.h2" Class="banner-text">BANNER</MudText>
    </MudCardContent>
  </MudCard>

  <!-- Profile Info Section -->
  <div class="profile-container">
    <div class="sidebar-left">
      <MudCard Class="suggested-panel" Elevation="2">
        <MudCardContent>
          <MudText Typo="Typo.h6" Class="suggested-title">Suggested</MudText>
          
          @foreach(string name in SuggestedUsers )
          {
            <div class="suggested-item">
              <div class="suggested-user">
                <MudAvatar Size="Size.Small" Class="suggested-avatar">
                  <MudIcon Icon="@Icons.Material.Filled.Person" />
                </MudAvatar>
                <MudText Typo="Typo.body2" Class="suggested-username">@name</MudText>
              </div>
              <MudIconButton Icon="@Icons.Material.Filled.AddCircleOutline" Size="Size.Small" Class="add-btn" />
            </div>
          }
        </MudCardContent>
      </MudCard>
    </div>

    <div class="main-content">
      <MudCard Class="profile-header" Elevation="2">
        <MudCardContent Class="profile-card-content">
          <div class="avatar-wrapper">
            <MudAvatar Size="Size.Large" Src="@AvatarUrl" Alt="avatar" Class="profile-avatar" />
          </div>
          
          
          <AuthorizeView>
            <Authorized>
              <div class="profile-info">
                <MudText Typo="Typo.h5" Class="username-text">@context.User.Identity?.Name</MudText>
                <div class="stats-row">
                  <MudText Class="stat-text">1 Following</MudText>
                  <MudText Class="stat-text">2 Followers</MudText>
                </div>
              </div>
            </Authorized>
          </AuthorizeView>
          

          <div class="setup-wrapper">
            <MudButton Href="/Account/Manage" Variant="Variant.Outlined" Color="Color.Primary" Class="setup-profile-btn">
              SET UP PROFILE
            </MudButton>
          </div>
        </MudCardContent>
      </MudCard>

      <!-- Posts Section -->
      <div class="posts-container">
        @if (Posts?.Any() != true)
        {
          <MudText Color="Color.Secondary">No posts yet.</MudText>
        }
        else
        {
          @foreach (var post in Posts)
          {
            <MudCard Class="post-card" Elevation="2">
              <MudCardContent>
                <MudText Class="post-title" Typo="Typo.h6">Post Title</MudText>
                <MudText Class="post-body" Typo="Typo.body2">
                  Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi. Aenean vulputate eleifend tellus. Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus. Phasellus viverra nulla ut metus varius laoreet. Quisque rutrum. Aenean imperdiet. Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi.
                </MudText>
              </MudCardContent>
              <MudCardActions Class="post-actions">
                <div class="action-item">
                  <MudIcon Icon="@Icons.Material.Outlined.FavoriteBorder" Size="Size.Small" />
                  <MudText Typo="Typo.caption">xx</MudText>
                </div>
                <div class="action-item">
                  <MudIcon Icon="@Icons.Material.Outlined.Image" Size="Size.Small" />
                  <MudText Typo="Typo.caption">xx</MudText>
                </div>
              </MudCardActions>
            </MudCard>
          }
        }
      </div>
    </div>
  </div>
</MudPaper>

<style>
  :root {
    --mud-palette-primary: #5f4de0;
    --banner-purple: #5f4de0;
  }

  .profile-page {
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    min-height: 100vh;
    background: #f5f5f5;
    color: #333;
  }

  .banner-section {
    width: 100%;
    height: 180px;
    background: linear-gradient(135deg, var(--banner-purple) 0%, #7d6ce8 100%);
    position: relative;
    border-radius: 0 0 24px 24px;
  }

  .banner-content {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    padding: 0 !important;
  }

  .banner-text {
    color: white;
    font-weight: 700;
    font-size: 64px;
    letter-spacing: 8px;
  }

  .profile-container {
    display: flex;
    gap: 24px;
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 20px;
    padding-top: 24px;
    position: relative;
  }

  .sidebar-left {
    width: 280px;
    flex-shrink: 0;
  }

  .suggested-panel {
    background: white;
    border-radius: 16px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  }

  .suggested-panel .mud-card-content {
    padding: 20px 16px;
  }

  .suggested-title {
    font-weight: 700;
    margin-bottom: 16px;
    color: #333;
  }

  .suggested-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 0;
    border-bottom: 1px solid #f0f0f0;
  }

  .suggested-item:last-child {
    border-bottom: none;
  }

  .suggested-user {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .suggested-avatar {
    background: #e0e0e0;
  }

  .suggested-username {
    font-size: 14px;
    color: #333;
  }

  .add-btn {
    color: #999;
  }

  .main-content {
    flex: 1;
    max-width: 900px;
  }

  .profile-header {
    background: white;
    border-radius: 16px;
    margin-bottom: 24px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  }

  .profile-card-content {
    display: flex;
    align-items: flex-start;
    gap: 20px;
    padding: 24px !important;
  }

  .avatar-wrapper {
    flex-shrink: 0;
  }

  .profile-avatar {
    width: 140px !important;
    height: 140px !important;
    border: 5px solid white;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    background: #e0e0e0;
  }

  .profile-info {
    flex: 1;
    padding-top: 8px;
  }

  .username-text {
    font-weight: 700;
    color: #333;
    margin-bottom: 8px;
  }

  .stats-row {
    display: flex;
    gap: 16px;
  }

  .stat-text {
    color: #666;
    font-size: 14px;
  }

  .setup-wrapper {
    padding-top: 8px;
  }

  .setup-profile-btn {
    border-radius: 24px;
    text-transform: uppercase;
    font-weight: 600;
    font-size: 12px;
    padding: 8px 24px;
    border: 2px solid var(--banner-purple);
    color: var(--banner-purple);
  }

  .setup-profile-btn:hover {
    background: rgba(95, 77, 224, 0.05);
  }

  .posts-container {
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  .post-card {
    background: white;
    border-radius: 16px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  }

  .post-card .mud-card-content {
    padding: 20px;
  }

  .post-title {
    font-weight: 700;
    color: #333;
    margin-bottom: 12px;
  }

  .post-body {
    color: #666;
    line-height: 1.6;
    margin-bottom: 16px;
  }

  .post-actions {
    display: flex;
    gap: 20px;
    padding: 12px 20px;
    border-top: 1px solid #f0f0f0;
  }

  .action-item {
    display: flex;
    align-items: center;
    gap: 6px;
    color: #999;
    cursor: pointer;
  }

  .action-item:hover {
    color: var(--banner-purple);
  }

  @@media (max-width: 1000px) {
    .sidebar-left {
      display: none;
    }

    .profile-container {
      padding-top: 24px;
    }

    .profile-avatar {
      width: 100px !important;
      height: 100px !important;
    }

    .banner-text {
      font-size: 48px;
    }
  }

  @@media (max-width: 600px) {
    .profile-card-content {
      flex-direction: column;
      align-items: center;
      text-align: center;
    }

    .setup-wrapper {
      width: 100%;
    }

    .setup-profile-btn {
      width: 100%;
    }

    .stats-row {
      justify-content: center;
    }
  }
</style>

@code {
  private string DisplayName { get; set; } = "serj";
  private string Handle { get; set; } = "@serjnyc";
  private bool IsVerified { get; set; } = false;
  private string AvatarUrl { get; set; } = "_content/FarmXpert.Client/images/default-avatar.png";

  private List<Post> Posts { get; set; }
  private List<string> SuggestedUsers { get; set; } = new List<string>
  {
    "John",
    "Jeff Buckley",
    "Annah Smith",
    "George Washington",
    "Charlie Kirk",
    "Emma Stone",
    "Walter White",
    "Larry"
  };

  protected override void OnInitialized()
  {
    Posts = new List<Post>
    {
      
    };
  }

  private class Post
  {
    public int Id { get; set; }
    public string Title { get; set; }
    public string Body { get; set; }
    public DateTime Date { get; set; }
    public int Likes { get; set; }
  }
}